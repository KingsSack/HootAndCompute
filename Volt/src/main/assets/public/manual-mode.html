<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TeleOp Project Name</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- AlpineJS CDN -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Poppins:wght@400;500;600;700&display=swap"
          rel="stylesheet">
    <!-- Material Symbols -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=search"/>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #1a1a1a; /* Slightly darker than gray-900 for closer match */
            color: #e5e7eb; /* gray-200 */
        }

        .font-mono {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Custom scrollbar for better dark theme integration (optional) */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #2d3748; /* gray-800 */
        }

        ::-webkit-scrollbar-thumb {
            background: #4a5568; /* gray-600 */
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #718096; /* gray-500 */
        }

        /* Style selects and inputs for dark mode */
        select, input[type="number"] {
            background-color: #4a5568; /* gray-600 */
            border: 1px solid #718096; /* gray-500 */
            color: #e5e7eb; /* gray-200 */
            border-radius: 0.375rem; /* rounded-md */
            padding: 0.5rem 0.75rem;
        }

        select:focus, input[type="number"]:focus {
            outline: none;
            border-color: #63b3ed; /* blue-400 */
            box-shadow: 0 0 0 2px rgba(99, 179, 237, 0.5);
        }

        /* Helper for connection dots */
        .connector-dot {
            width: 0.3rem;
            height: 0.3rem;
            background-color: #ffffff;
            border-radius: 100%;
            position: absolute;
        }

        /* Helper for dashed lines */
        .line-dashed {
            position: absolute;
            border-style: dashed;
            border-color: #ffffff;
        }

        .line-horizontal {
            border-top-width: 1px;
            height: 1px;
        }

        .line-vertical {
            border-left-width: 1px;
            width: 1px;
        }

        .action-box {
            background-color: #4a5568; /* gray-600 */
            color: #e5e7eb; /* gray-200 */
            padding: 0.3rem 0.8rem;
            border-radius: 0.375rem; /* rounded-md */
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
            white-space: nowrap;
            position: absolute; /* Needed for positioning */
        }

        .action-box:hover {
            background-color: #718096; /* gray-500 */
        }

        .action-box.selected {
            background-color: #ffffff; /* white */
            color: #1f2937; /* gray-800 */
            font-weight: 600;
        }

        .material-symbols-rounded {
            font-variation-settings: 'FILL' 0,
            'wght' 400,
            'GRAD' 0,
            'opsz' 24
        }
    </style>
</head>
<body class="bg-[#1a1a1a] text-gray-200 min-h-screen">

<div x-data="voltApp()" class="flex flex-col h-screen">
    <!-- Header -->
    <header class="flex items-center justify-between p-4 border-b border-gray-700">
        <div class="flex items-center space-x-3">
            <span class="material-symbols-rounded text-3xl">bolt</span>
            <h1 class="text-lg text-gray-400">Volt</h1>
            <h1 class="text-xs text-gray-400">/</h1>
            <h1 class="text-lg text-gray-100">TeleOp Project Name</h1>
        </div>
        <button class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-5 rounded-md flex items-center space-x-1 transition duration-150 ease-in-out">
            <span class="material-symbols-rounded text-lg">play_arrow</span>
            <span>Run</span>
        </button>
    </header>

    <!-- Main Content -->
    <div class="flex flex-1 overflow-hidden">
        <!-- Gamepads Area -->
        <div class="flex-1 flex flex-col items-center justify-center p-8 space-y-12 overflow-y-auto relative">

            <!-- Gamepad 1 -->
            <div class="relative w-[600px] h-[450px]"> <!-- Adjust size as needed -->
                <img src="./f310-gallery-1.png" alt="Gamepad Controller 1"
                     class="absolute inset-0 w-full h-full object-contain pointer-events-none">

                <!-- Action Labels & Lines for Gamepad 1 -->
                <!-- NOTE: Positions (top, left, right, bottom, w-, h-) are ESTIMATES -->
                <!--       and need careful adjustment based on the actual image. -->

                <!-- Left Stick Up -->
                <div @click="selectAction('gp1_lu')" :class="{'selected': selectedActionId === 'gp1_lu'}"
                     class="action-box" style="left: 10px; top: 100px;" x-text="actions.gp1_lu.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 112px; width: 45px;"></div>
                <div class="connector-dot" style="left: 102px; top: 110px;"></div>
                <div class="connector-dot" style="left: 150px; top: 110px;"></div>

                <!-- Left Stick Down -->
                <div @click="selectAction('gp1_ld')" :class="{'selected': selectedActionId === 'gp1_ld'}"
                     class="action-box" style="left: 10px; top: 180px;" x-text="actions.gp1_ld.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 192px; width: 45px;"></div>
                <div class="connector-dot" style="left: 102px; top: 190px;"></div>
                <div class="connector-dot" style="left: 150px; top: 190px;"></div>

                <!-- Left Stick Left -->
                <div @click="selectAction('gp1_ll')" :class="{'selected': selectedActionId === 'gp1_ll'}"
                     class="action-box" style="left: 10px; top: 140px;" x-text="actions.gp1_ll.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 152px; width: 25px;"></div>
                <div class="connector-dot" style="left: 102px; top: 150px;"></div>
                <div class="connector-dot" style="left: 130px; top: 150px;"></div>

                <!-- Left Stick Right (D-Pad Right) -->
                <div @click="selectAction('gp1_lr')" :class="{'selected': selectedActionId === 'gp1_lr'}"
                     class="action-box" style="left: 10px; top: 220px;" x-text="actions.gp1_lr.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 232px; width: 45px;"></div>
                <div class="connector-dot" style="left: 102px; top: 230px;"></div>
                <div class="connector-dot" style="left: 150px; top: 230px;"></div>


                <!-- Left Trigger (Action 2 Example) -->
                <div @click="selectAction('gp1_lt')" :class="{'selected': selectedActionId === 'gp1_lt'}"
                     class="action-box" style="left: 10px; top: 260px;" x-text="actions.gp1_lt.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 272px; width: 20px;"></div>
                <div class="line-dashed line-vertical" style="left: 125px; top: 230px; height: 42px;"></div>
                <div class="line-dashed line-horizontal" style="left: 125px; top: 230px; width: 30px;"></div>
                <div class="connector-dot" style="left: 102px; top: 270px;"></div>
                <div class="connector-dot" style="left: 155px; top: 228px;"></div> <!-- Approx trigger point -->

                <!-- Left Bumper -->
                <div @click="selectAction('gp1_lb')" :class="{'selected': selectedActionId === 'gp1_lb'}"
                     class="action-box" style="left: 100px; top: 10px;" x-text="actions.gp1_lb.type"></div>
                <div class="line-dashed line-vertical" style="left: 140px; top: 45px; height: 20px;"></div>
                <div class="line-dashed line-horizontal" style="left: 140px; top: 65px; width: 30px;"></div>
                <div class="connector-dot" style="left: 138px; top: 43px;"></div>
                <div class="connector-dot" style="left: 170px; top: 63px;"></div> <!-- Approx bumper point -->

                <!-- Right Stick Up -->
                <div @click="selectAction('gp1_ru')" :class="{'selected': selectedActionId === 'gp1_ru'}"
                     class="action-box" style="right: 10px; top: 100px;" x-text="actions.gp1_ru.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 112px; width: 45px;"></div>
                <div class="connector-dot" style="right: 102px; top: 110px;"></div>
                <div class="connector-dot" style="right: 150px; top: 110px;"></div>

                <!-- Right Stick Down -->
                <div @click="selectAction('gp1_rd')" :class="{'selected': selectedActionId === 'gp1_rd'}"
                     class="action-box" style="right: 10px; top: 180px;" x-text="actions.gp1_rd.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 192px; width: 45px;"></div>
                <div class="connector-dot" style="right: 102px; top: 190px;"></div>
                <div class="connector-dot" style="right: 150px; top: 190px;"></div>

                <!-- Right Stick Left -->
                <div @click="selectAction('gp1_rl')" :class="{'selected': selectedActionId === 'gp1_rl'}"
                     class="action-box" style="right: 10px; top: 140px;" x-text="actions.gp1_rl.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 152px; width: 25px;"></div>
                <div class="connector-dot" style="right: 102px; top: 150px;"></div>
                <div class="connector-dot" style="right: 130px; top: 150px;"></div>

                <!-- Right Stick Right -->
                <div @click="selectAction('gp1_rr')" :class="{'selected': selectedActionId === 'gp1_rr'}"
                     class="action-box" style="right: 10px; top: 220px;" x-text="actions.gp1_rr.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 232px; width: 45px;"></div>
                <div class="connector-dot" style="right: 102px; top: 230px;"></div>
                <div class="connector-dot" style="right: 150px; top: 230px;"></div>

                <!-- Right Trigger (Action 1 Example) -->
                <div @click="selectAction('gp1_rt')" :class="{'selected': selectedActionId === 'gp1_rt'}"
                     class="action-box" style="right: 10px; top: 260px;" x-text="actions.gp1_rt.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 272px; width: 20px;"></div>
                <div class="line-dashed line-vertical" style="right: 125px; top: 230px; height: 42px;"></div>
                <div class="line-dashed line-horizontal" style="right: 125px; top: 230px; width: 30px;"></div>
                <div class="connector-dot" style="right: 102px; top: 270px;"></div>
                <div class="connector-dot" style="right: 155px; top: 228px;"></div> <!-- Approx trigger point -->

                <!-- Right Bumper -->
                <div @click="selectAction('gp1_rb')" :class="{'selected': selectedActionId === 'gp1_rb'}"
                     class="action-box" style="right: 100px; top: 10px;" x-text="actions.gp1_rb.type"></div>
                <div class="line-dashed line-vertical" style="right: 140px; top: 45px; height: 20px;"></div>
                <div class="line-dashed line-horizontal" style="right: 140px; top: 65px; width: 30px;"></div>
                <div class="connector-dot" style="right: 138px; top: 43px;"></div>
                <div class="connector-dot" style="right: 170px; top: 63px;"></div> <!-- Approx bumper point -->

                <!-- Face Buttons (Y, B, A, X) -->
                <div @click="selectAction('gp1_y')" :class="{'selected': selectedActionId === 'gp1_y'}"
                     class="action-box" style="right: 10px; top: 50px;" x-text="actions.gp1_y.type"></div> <!-- Y -->
                <div class="line-dashed line-horizontal" style="right: 105px; top: 62px; width: 40px;"></div>
                <div class="connector-dot" style="right: 102px; top: 60px;"></div>
                <div class="connector-dot" style="right: 145px; top: 60px;"></div> <!-- Approx Y button -->

                <div @click="selectAction('gp1_b')" :class="{'selected': selectedActionId === 'gp1_b'}"
                     class="action-box" style="right: 10px; top: 90px;" x-text="actions.gp1_b.type"></div> <!-- B -->
                <div class="line-dashed line-horizontal" style="right: 105px; top: 102px; width: 55px;"></div>
                <div class="connector-dot" style="right: 102px; top: 100px;"></div>
                <div class="connector-dot" style="right: 160px; top: 100px;"></div> <!-- Approx B button -->

                <div @click="selectAction('gp1_a')" :class="{'selected': selectedActionId === 'gp1_a'}"
                     class="action-box" style="right: 10px; top: 130px;" x-text="actions.gp1_a.type"></div> <!-- A -->
                <div class="line-dashed line-horizontal" style="right: 105px; top: 142px; width: 40px;"></div>
                <div class="connector-dot" style="right: 102px; top: 140px;"></div>
                <div class="connector-dot" style="right: 145px; top: 140px;"></div> <!-- Approx A button -->

                <div @click="selectAction('gp1_x')" :class="{'selected': selectedActionId === 'gp1_x'}"
                     class="action-box" style="right: 10px; top: 170px;" x-text="actions.gp1_x.type"></div> <!-- X -->
                <div class="line-dashed line-horizontal" style="right: 105px; top: 182px; width: 25px;"></div>
                <div class="connector-dot" style="right: 102px; top: 180px;"></div>
                <div class="connector-dot" style="right: 130px; top: 180px;"></div> <!-- Approx X button -->

            </div>

            <!-- Gamepad 2 -->
            <div class="relative w-[600px] h-[450px]"> <!-- Adjust size as needed -->
                <img src="./f310-gallery-1.png" alt="Gamepad Controller 2"
                     class="absolute inset-0 w-full h-full object-contain pointer-events-none">
                <!-- Action Labels & Lines for Gamepad 2 (Similar structure, different IDs) -->
                <!-- Example: Left Trigger -->
                <div @click="selectAction('gp2_lt')" :class="{'selected': selectedActionId === 'gp2_lt'}"
                     class="action-box" style="left: 10px; top: 260px;" x-text="actions.gp2_lt.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 272px; width: 20px;"></div>
                <div class="line-dashed line-vertical" style="left: 125px; top: 230px; height: 42px;"></div>
                <div class="line-dashed line-horizontal" style="left: 125px; top: 230px; width: 30px;"></div>
                <div class="connector-dot" style="left: 102px; top: 270px;"></div>
                <div class="connector-dot" style="left: 155px; top: 228px;"></div>

                <!-- Add all other buttons for Gamepad 2 similarly, using IDs like 'gp2_lu', 'gp2_a', etc. -->
                <!-- ... (omitted for brevity, copy/paste/adjust from Gamepad 1) ... -->
                <!-- Left Stick Up -->
                <div @click="selectAction('gp2_lu')" :class="{'selected': selectedActionId === 'gp2_lu'}"
                     class="action-box" style="left: 10px; top: 100px;" x-text="actions.gp2_lu.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 112px; width: 45px;"></div>
                <div class="connector-dot" style="left: 102px; top: 110px;"></div>
                <div class="connector-dot" style="left: 150px; top: 110px;"></div>

                <!-- Left Stick Down -->
                <div @click="selectAction('gp2_ld')" :class="{'selected': selectedActionId === 'gp2_ld'}"
                     class="action-box" style="left: 10px; top: 180px;" x-text="actions.gp2_ld.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 192px; width: 45px;"></div>
                <div class="connector-dot" style="left: 102px; top: 190px;"></div>
                <div class="connector-dot" style="left: 150px; top: 190px;"></div>

                <!-- Left Stick Left -->
                <div @click="selectAction('gp2_ll')" :class="{'selected': selectedActionId === 'gp2_ll'}"
                     class="action-box" style="left: 10px; top: 140px;" x-text="actions.gp2_ll.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 152px; width: 25px;"></div>
                <div class="connector-dot" style="left: 102px; top: 150px;"></div>
                <div class="connector-dot" style="left: 130px; top: 150px;"></div>

                <!-- Left Stick Right (D-Pad Right) -->
                <div @click="selectAction('gp2_lr')" :class="{'selected': selectedActionId === 'gp2_lr'}"
                     class="action-box" style="left: 10px; top: 220px;" x-text="actions.gp2_lr.type"></div>
                <div class="line-dashed line-horizontal" style="left: 105px; top: 232px; width: 45px;"></div>
                <div class="connector-dot" style="left: 102px; top: 230px;"></div>
                <div class="connector-dot" style="left: 150px; top: 230px;"></div>

                <!-- Left Bumper -->
                <div @click="selectAction('gp2_lb')" :class="{'selected': selectedActionId === 'gp2_lb'}"
                     class="action-box" style="left: 100px; top: 10px;" x-text="actions.gp2_lb.type"></div>
                <div class="line-dashed line-vertical" style="left: 140px; top: 45px; height: 20px;"></div>
                <div class="line-dashed line-horizontal" style="left: 140px; top: 65px; width: 30px;"></div>
                <div class="connector-dot" style="left: 138px; top: 43px;"></div>
                <div class="connector-dot" style="left: 170px; top: 63px;"></div> <!-- Approx bumper point -->

                <!-- Right Stick Up -->
                <div @click="selectAction('gp2_ru')" :class="{'selected': selectedActionId === 'gp2_ru'}"
                     class="action-box" style="right: 10px; top: 100px;" x-text="actions.gp2_ru.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 112px; width: 45px;"></div>
                <div class="connector-dot" style="right: 102px; top: 110px;"></div>
                <div class="connector-dot" style="right: 150px; top: 110px;"></div>

                <!-- Right Stick Down -->
                <div @click="selectAction('gp2_rd')" :class="{'selected': selectedActionId === 'gp2_rd'}"
                     class="action-box" style="right: 10px; top: 180px;" x-text="actions.gp2_rd.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 192px; width: 45px;"></div>
                <div class="connector-dot" style="right: 102px; top: 190px;"></div>
                <div class="connector-dot" style="right: 150px; top: 190px;"></div>

                <!-- Right Stick Left -->
                <div @click="selectAction('gp2_rl')" :class="{'selected': selectedActionId === 'gp2_rl'}"
                     class="action-box" style="right: 10px; top: 140px;" x-text="actions.gp2_rl.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 152px; width: 25px;"></div>
                <div class="connector-dot" style="right: 102px; top: 150px;"></div>
                <div class="connector-dot" style="right: 130px; top: 150px;"></div>

                <!-- Right Stick Right -->
                <div @click="selectAction('gp2_rr')" :class="{'selected': selectedActionId === 'gp2_rr'}"
                     class="action-box" style="right: 10px; top: 220px;" x-text="actions.gp2_rr.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 232px; width: 45px;"></div>
                <div class="connector-dot" style="right: 102px; top: 230px;"></div>
                <div class="connector-dot" style="right: 150px; top: 230px;"></div>

                <!-- Right Trigger -->
                <div @click="selectAction('gp2_rt')" :class="{'selected': selectedActionId === 'gp2_rt'}"
                     class="action-box" style="right: 10px; top: 260px;" x-text="actions.gp2_rt.type"></div>
                <div class="line-dashed line-horizontal" style="right: 105px; top: 272px; width: 20px;"></div>
                <div class="line-dashed line-vertical" style="right: 125px; top: 230px; height: 42px;"></div>
                <div class="line-dashed line-horizontal" style="right: 125px; top: 230px; width: 30px;"></div>
                <div class="connector-dot" style="right: 102px; top: 270px;"></div>
                <div class="connector-dot" style="right: 155px; top: 228px;"></div> <!-- Approx trigger point -->

                <!-- Right Bumper -->
                <div @click="selectAction('gp2_rb')" :class="{'selected': selectedActionId === 'gp2_rb'}"
                     class="action-box" style="right: 100px; top: 10px;" x-text="actions.gp2_rb.type"></div>
                <div class="line-dashed line-vertical" style="right: 140px; top: 45px; height: 20px;"></div>
                <div class="line-dashed line-horizontal" style="right: 140px; top: 65px; width: 30px;"></div>
                <div class="connector-dot" style="right: 138px; top: 43px;"></div>
                <div class="connector-dot" style="right: 170px; top: 63px;"></div> <!-- Approx bumper point -->

                <!-- Face Buttons (Y, B, A, X) -->
                <div @click="selectAction('gp2_y')" :class="{'selected': selectedActionId === 'gp2_y'}"
                     class="action-box" style="right: 10px; top: 50px;" x-text="actions.gp2_y.type"></div> <!-- Y -->
                <div class="line-dashed line-horizontal" style="right: 105px; top: 62px; width: 40px;"></div>
                <div class="connector-dot" style="right: 102px; top: 60px;"></div>
                <div class="connector-dot" style="right: 145px; top: 60px;"></div> <!-- Approx Y button -->

                <div @click="selectAction('gp2_b')" :class="{'selected': selectedActionId === 'gp2_b'}"
                     class="action-box" style="right: 10px; top: 90px;" x-text="actions.gp2_b.type"></div> <!-- B -->
                <div class="line-dashed line-horizontal" style="right: 105px; top: 102px; width: 55px;"></div>
                <div class="connector-dot" style="right: 102px; top: 100px;"></div>
                <div class="connector-dot" style="right: 160px; top: 100px;"></div> <!-- Approx B button -->

                <div @click="selectAction('gp2_a')" :class="{'selected': selectedActionId === 'gp2_a'}"
                     class="action-box" style="right: 10px; top: 130px;" x-text="actions.gp2_a.type"></div> <!-- A -->
                <div class="line-dashed line-horizontal" style="right: 105px; top: 142px; width: 40px;"></div>
                <div class="connector-dot" style="right: 102px; top: 140px;"></div>
                <div class="connector-dot" style="right: 145px; top: 140px;"></div> <!-- Approx A button -->

                <div @click="selectAction('gp2_x')" :class="{'selected': selectedActionId === 'gp2_x'}"
                     class="action-box" style="right: 10px; top: 170px;" x-text="actions.gp2_x.type"></div> <!-- X -->
                <div class="line-dashed line-horizontal" style="right: 105px; top: 182px; width: 25px;"></div>
                <div class="connector-dot" style="right: 102px; top: 180px;"></div>
                <div class="connector-dot" style="right: 130px; top: 180px;"></div> <!-- Approx X button -->

            </div>

        </div>

        <!-- Sidebar -->
        <aside class="w-72 bg-gray-800 p-6 flex flex-col space-y-8 border-l border-gray-700 overflow-y-auto">
            <!-- Robot Section -->
            <div class="space-y-3">
                <h2 class="text-lg font-semibold font-mono text-gray-100">Robot</h2>
                <select id="robot-select" class="w-full font-mono" 
                        @change="changeRobot($event.target.value)">
                    <option value="">Select</option>
                    <option value="centerstage">Centerstage Bot</option>
                    <option value="roverruckus">Rover Ruckus Bot</option>
                    <option value="freightfrenzy">Freight Frenzy Bot</option>
                    <!-- Add more robots as needed -->
                </select>
            </div>

            <!-- Action Section -->
            <div class="space-y-3 border-t border-gray-700 pt-6">
                <h2 class="text-lg font-semibold font-mono text-gray-100">Action</h2>
                <div class="space-y-2">
                    <label for="action-type-select" class="block text-sm font-medium font-mono text-gray-400">Action Type</label>
                    <select id="action-type-select" class="w-full font-mono"
                            :value="selectedAction ? selectedAction.type : 'No Action'"
                            @change="updateSelectedActionType($event)"
                            :disabled="!selectedRobot">
                        <template x-for="actionType in availableActionTypes" :key="actionType">
                            <option :value="actionType" x-text="actionType"></option>
                        </template>
                    </select>
                </div>
                <div class="space-y-2" x-show="selectedAction && selectedAction.type !== 'No Action'">
                    <!-- Show power only if an action is selected and it's not 'No Action' -->
                    <label for="action-power" class="block text-sm font-medium font-mono text-gray-400">Power</label>
                    <input type="number" id="action-power" name="action-power" step="0.1" placeholder="0.0"
                           class="w-full font-mono"
                           :value="selectedAction ? selectedAction.power : 0.0"
                           @input="updateSelectedActionPower($event)"
                           :disabled="!selectedRobot">
                </div>
                <div class="text-xs text-gray-500 pt-2" x-show="selectedActionId">
                    Selected: <span class="font-medium text-gray-400" x-text="selectedActionId"></span>
                </div>
                <div class="text-xs text-red-500 pt-2" x-show="!selectedRobot">
                    Please select a robot first
                </div>
            </div>
        </aside>
    </div>
</div>

<script>
    function voltApp() {
        return {
            selectedActionId: null,
            selectedRobot: null,
            
            // Define robot-specific action types
            robotActionTypes: {
                'centerstage': ['No Action', 'Intake', 'Outtake', 'Arm Up', 'Arm Down', 'Drive Forward', 'Drive Backward', 'Strafe Left', 'Strafe Right', 'Rotate Left', 'Rotate Right', 'Launch Drone', 'Hang'],
                'roverruckus': ['No Action', 'Collect Minerals', 'Deposit Minerals', 'Extend Arm', 'Retract Arm', 'Drive Forward', 'Drive Backward', 'Turn Left', 'Turn Right', 'Latch', 'Unlatch'],
                'freightfrenzy': ['No Action', 'Intake Freight', 'Deposit Freight', 'Lift Up', 'Lift Down', 'Drive Forward', 'Drive Backward', 'Strafe Left', 'Strafe Right', 'Spin Duck', 'Park']
            },
            
            // Default action types when no robot is selected
            availableActionTypes: ['No Action'],
            
            // Initialize all actions with 'No Action'
            actions: {
                // Gamepad 1 Actions
                'gp1_lu': {type: 'No Action', power: 0.0},
                'gp1_ld': {type: 'No Action', power: 0.0},
                'gp1_ll': {type: 'No Action', power: 0.0},
                'gp1_lr': {type: 'No Action', power: 0.0},
                'gp1_lt': {type: 'No Action', power: 0.0},
                'gp1_lb': {type: 'No Action', power: 0.0},
                'gp1_ru': {type: 'No Action', power: 0.0},
                'gp1_rd': {type: 'No Action', power: 0.0},
                'gp1_rl': {type: 'No Action', power: 0.0},
                'gp1_rr': {type: 'No Action', power: 0.0},
                'gp1_rt': {type: 'No Action', power: 0.0},
                'gp1_rb': {type: 'No Action', power: 0.0},
                'gp1_y': {type: 'No Action', power: 0.0},
                'gp1_b': {type: 'No Action', power: 0.0},
                'gp1_a': {type: 'No Action', power: 0.0},
                'gp1_x': {type: 'No Action', power: 0.0},
                // Gamepad 2 Actions
                'gp2_lu': {type: 'No Action', power: 0.0},
                'gp2_ld': {type: 'No Action', power: 0.0},
                'gp2_ll': {type: 'No Action', power: 0.0},
                'gp2_lr': {type: 'No Action', power: 0.0},
                'gp2_lt': {type: 'No Action', power: 0.0},
                'gp2_lb': {type: 'No Action', power: 0.0},
                'gp2_ru': {type: 'No Action', power: 0.0},
                'gp2_rd': {type: 'No Action', power: 0.0},
                'gp2_rl': {type: 'No Action', power: 0.0},
                'gp2_rr': {type: 'No Action', power: 0.0},
                'gp2_rt': {type: 'No Action', power: 0.0},
                'gp2_rb': {type: 'No Action', power: 0.0},
                'gp2_y': {type: 'No Action', power: 0.0},
                'gp2_b': {type: 'No Action', power: 0.0},
                'gp2_a': {type: 'No Action', power: 0.0},
                'gp2_x': {type: 'No Action', power: 0.0},
            },
            
            // Predefined robot configurations for quick setup
            robotConfigurations: {
                'centerstage': {
                    'gp1_lu': {type: 'Drive Forward', power: 1.0},
                    'gp1_ld': {type: 'Drive Backward', power: 1.0},
                    'gp1_ll': {type: 'Strafe Left', power: 0.8},
                    'gp1_lr': {type: 'Strafe Right', power: 0.8},
                    'gp1_rt': {type: 'Intake', power: 1.0},
                    'gp1_lt': {type: 'Outtake', power: 0.9},
                    'gp2_a': {type: 'Arm Up', power: 0.7},
                    'gp2_b': {type: 'Arm Down', power: 0.7},
                    'gp2_y': {type: 'Launch Drone', power: 1.0},
                    'gp2_lt': {type: 'Hang', power: 1.0},
                },
                'roverruckus': {
                    'gp1_lu': {type: 'Drive Forward', power: 1.0},
                    'gp1_ld': {type: 'Drive Backward', power: 1.0},
                    'gp1_rl': {type: 'Turn Left', power: 0.8},
                    'gp1_rr': {type: 'Turn Right', power: 0.8},
                    'gp1_a': {type: 'Collect Minerals', power: 1.0},
                    'gp1_b': {type: 'Deposit Minerals', power: 0.9},
                    'gp2_y': {type: 'Extend Arm', power: 0.6},
                    'gp2_a': {type: 'Retract Arm', power: 0.6},
                    'gp2_lt': {type: 'Latch', power: 1.0},
                    'gp2_rt': {type: 'Unlatch', power: 1.0},
                },
                'freightfrenzy': {
                    'gp1_lu': {type: 'Drive Forward', power: 1.0},
                    'gp1_ld': {type: 'Drive Backward', power: 1.0},
                    'gp1_ll': {type: 'Strafe Left', power: 0.8},
                    'gp1_lr': {type: 'Strafe Right', power: 0.8},
                    'gp1_a': {type: 'Intake Freight', power: 1.0},
                    'gp1_b': {type: 'Deposit Freight', power: 0.8},
                    'gp2_y': {type: 'Lift Up', power: 0.7},
                    'gp2_a': {type: 'Lift Down', power: 0.7},
                    'gp2_rt': {type: 'Spin Duck', power: 0.5},
                    'gp2_rb': {type: 'Park', power: 1.0},
                }
            },

            get selectedAction() {
                return this.selectedActionId && this.actions[this.selectedActionId] ? 
                       this.actions[this.selectedActionId] : null;
            },

            changeRobot(robotId) {
                // Update selected robot
                this.selectedRobot = robotId;
                
                // Reset all actions to 'No Action'
                for (const actionId in this.actions) {
                    this.actions[actionId] = {type: 'No Action', power: 0.0};
                }
                
                // Update available action types based on selected robot
                if (robotId && this.robotActionTypes[robotId]) {
                    this.availableActionTypes = this.robotActionTypes[robotId];
                    
                    // Apply predefined configuration if available
                    if (this.robotConfigurations[robotId]) {
                        const config = this.robotConfigurations[robotId];
                        for (const actionId in config) {
                            this.actions[actionId] = {...config[actionId]};
                        }
                    }
                } else {
                    // Reset to default if no robot selected
                    this.availableActionTypes = ['No Action'];
                }
                
                // Clear selected action
                this.selectedActionId = null;
            },

            selectAction(id) {
                if (this.selectedRobot) {
                    this.selectedActionId = id;
                }
            },

            updateSelectedActionType(event) {
                if (this.selectedActionId && this.actions[this.selectedActionId]) {
                    this.actions[this.selectedActionId].type = event.target.value;
                    // Reset power if switching to 'No Action'
                    if (event.target.value === 'No Action') {
                        this.actions[this.selectedActionId].power = 0.0;
                    }
                }
            },

            updateSelectedActionPower(event) {
                if (this.selectedActionId && this.actions[this.selectedActionId]) {
                    // Basic validation, ensure it's a number
                    const powerVal = parseFloat(event.target.value);
                    this.actions[this.selectedActionId].power = isNaN(powerVal) ? 0.0 : powerVal;
                }
            }
        }
    }
</script>

</body>
</html>
